# Обмен валют

REST API для описания валют и обменных курсов. Позволяет просматривать и редактировать списки валют и обменных курсов, и совершать расчёт конвертации произвольных сумм из одной валюты в другую.

## Технологии

- **Java Servlets** - для обработки HTTP запросов
- **SQLite** - база данных
- **JDBC** - для работы с базой данных
- **Maven** - система сборки
- **JSON** - формат обмена данными
- **Apache Tomcat** - сервер приложений

## База данных

### Таблица `Currencies`

| Колонка  | Тип     | Описание                                   |
|----------|---------|-------------------------------------------|
| ID       | int     | Айди валюты, автоинкремент, первичный ключ |
| Code     | Varchar | Код валюты (USD, EUR, и т.д.)             |
| FullName | Varchar | Полное имя валюты                         |
| Sign     | Varchar | Символ валюты                             |

### Таблица `ExchangeRates`

| Колонка          | Тип        | Описание                                                    |
|------------------|------------|-------------------------------------------------------------|
| ID               | int        | Айди курса обмена, автоинкремент, первичный ключ           |
| BaseCurrencyId   | int        | ID базовой валюты, внешний ключ на Currencies.ID           |
| TargetCurrencyId | int        | ID целевой валюты, внешний ключ на Currencies.ID           |
| Rate             | Decimal(6) | Курс обмена единицы базовой валюты к единице целевой валюты |

## REST API

### Валюты

#### `GET /currencies`
Получение списка всех валют.

**Ответ:**
```json
[
    {
        "id": 1,
        "name": "United States dollar",
        "code": "USD",
        "sign": "$"
    },
    {
        "id": 2,
        "name": "Euro",
        "code": "EUR",
        "sign": "€"
    }
]
```

#### `GET /currency/{CODE}`
Получение конкретной валюты по её коду.

**Пример:** `GET /currency/USD`

**Ответ:**
```json
{
    "id": 1,
    "name": "United States dollar",
    "code": "USD",
    "sign": "$"
}
```

#### `POST /currencies`
Добавление новой валюты.

**Параметры формы:**
- `name` - полное название валюты
- `code` - код валюты
- `sign` - символ валюты

### Обменные курсы

#### `GET /exchangeRates`
Получение списка всех обменных курсов.

#### `GET /exchangeRate/{CODES}`
Получение конкретного обменного курса по кодам валют.

**Пример:** `GET /exchangeRate/USDRUB`

#### `POST /exchangeRates`
Добавление нового обменного курса.

#### `PATCH /exchangeRate/{CODES}`
Обновление существующего обменного курса.

### Обмен валюты

#### `GET /exchange?from={CODE}&to={CODE}&amount={AMOUNT}`
Расчёт перевода определённого количества средств из одной валюты в другую.

**Пример:** `GET /exchange?from=USD&to=RUB&amount=100`

**Ответ:**
```json
{
    "baseCurrency": {
        "id": 1,
        "name": "United States dollar",
        "code": "USD",
        "sign": "$"
    },
    "targetCurrency": {
        "id": 2,
        "name": "Russian Ruble",
        "code": "RUB",
        "sign": "₽"
    },
    "rate": 74.50,
    "amount": 100.00,
    "convertedAmount": 7450.00
}
```

## Структура проекта

```
src/
├── main/
│   ├── java/com/mysite/currencyexchange/
│   │   ├── dao/           # Data Access Objects
│   │   ├── dto/           # Data Transfer Objects
│   │   ├── mapper/        # Преобразователи между сущностями
│   │   ├── model/         # Модели данных
│   │   ├── rest/          # REST контроллеры (сервлеты)
│   │   └── service/       # Бизнес-логика
│   ├── resources/
│   │   └── db/scripts/    # SQL скрипты для создания таблиц
│   └── webapp/
│       └── WEB-INF/
│           └── web.xml    # Конфигурация веб-приложения
```

## Запуск проекта

### Требования
- Java 8+
- Maven 3.6+
- Apache Tomcat 9+

### Сборка проекта
```bash
mvn clean compile
mvn package
```

### Деплой
1. Соберите WAR файл: `mvn package`
2. Скопируйте файл `target/currency-exchange.war` в директорию `webapps` Tomcat
3. Запустите Tomcat
4. API будет доступен по адресу: `http://localhost:8080/currency-exchange`

### Инициализация базы данных
База данных SQLite создаётся автоматически при первом запуске приложения. SQL скрипты для создания таблиц находятся в `src/main/resources/db/scripts/`.

## HTTP коды ответов

- **200** - Успешное выполнение запроса
- **201** - Ресурс успешно создан
- **400** - Некорректные параметры запроса
- **404** - Ресурс не найден
- **409** - Конфликт - ресурс с таким именем уже существует
- **500** - Внутренняя ошибка сервера